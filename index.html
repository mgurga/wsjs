<!doctype html>
<html>

<head>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/rasterizehtml/1.3.0/rasterizeHTML.allinone.js"></script>-->
    <title>wsjs</title>
</head>

<body>
    <div class="canvas">
        <canvas width="1280" height="720" id="wsjsCanvas" sandbox="allow-scripts">your browser does not support the canvas element</canvas>

    </div>
</body>

<script src="wsjs.js"></script>
<script>
    var c = document.getElementById("wsjsCanvas");
    c.retinaResolutionEnabled = false;
    var ctx = c.getContext('2d');

    var buttonClicker = new wsjs(100, 100, 300, 400, c, ctx);
    var tokens = 0;
    var machines = [];
    buttonClicker.windowName = "Super Button Clicker";
    buttonClicker.setWindowTab(0 * 100, c.height - 20, 99, 20, "windowTab " + 0);
    buttonClicker.createElement({"type": "button","x":40, "y":50, "w":200, "h":75,"id":"testButton","onclick":"buttonClicked();"});
    buttonClicker.createElement({"type": "label", "x":40, "y":30, "text":"Click Tokens: 0", "id":"scoreLabel"});
    buttonClicker.createElement({"type": "label", "x":80, "y":90, "text":"GET TOKENS", "id":"getClicksLabel"});

    buttonClicker.createElement({"type": "button","x":40, "y":150, "w":175, "h":40,"id":"littleClicker","onclick":"boughtMachine(1)"});
    buttonClicker.createElement({"type": "label", "x":50, "y":170, "text":"little", "id":"littleClickerLabel", "font":"15px Monospace"});
    buttonClicker.createElement({"type": "label", "x":50, "y":180, "text":"clicker", "id":"littleClickerLabel2", "font":"15px Monospace"});
    buttonClicker.createElement({"type": "label", "x":150, "y":175, "text":"+1 tps", "id":"littleClickerLabel2", "font":"15px Monospace"});

    function buttonClicked() {
        tokens++;
        buttonClicker.editElement("scoreLabel", "text", "Click Tokens: " + tokens);
    }

    function boughtMachine(type) {
        if(type == 1 && tokens >= 100) {
            machines[machines.length] = type;
            tokens -= 100;
        } else {
            alert("not enough tokens, requires 100");
        }
    }

    setInterval(function() {
        for(var i = 0; i < machines.length; i++) {
            if(machines[i] == 1) {
                tokens += 1;
            }
        }
        buttonClicker.editElement("scoreLabel", "text", "Click Tokens: " + tokens);
    }, 1000);

    setInterval(function() {
        buttonClicker.draw();

    }, 100);

    function randomNum(min, max) {
        return Math.floor(Math.random() * (max - min)) + min;
    }
</script>

<style>
    body {
        background-color: black;
    }

    .canvas {
        display: inline-block;
        border-style: dashed;
        border-width: 5px;
        border-color: red;
    }
</style>

</html>
